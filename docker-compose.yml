services:
  # Skim Trading Bot
   bot:
    build: .
    container_name: skim-bot
    restart: unless-stopped
    environment:
      # OAuth 1.0a credentials for IBKR Client Portal API
      - OAUTH_CONSUMER_KEY=${OAUTH_CONSUMER_KEY}
      - OAUTH_ACCESS_TOKEN=${OAUTH_ACCESS_TOKEN}
      - OAUTH_ACCESS_TOKEN_SECRET=${OAUTH_ACCESS_TOKEN_SECRET}
      - OAUTH_SIGNATURE_PATH=${OAUTH_SIGNATURE_PATH}
      - OAUTH_ENCRYPTION_PATH=${OAUTH_ENCRYPTION_PATH}
      - OAUTH_DH_PRIME=${OAUTH_DH_PRIME}
      # Discord webhook for notifications (optional)
      - DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
      - ./oauth_keys:/opt/skim/oauth_keys:ro
      - ./scripts:/app/scripts:ro
      - ./crontab:/etc/cron.d/skim-cron:ro
    networks:
      - skim-network

networks:
  skim-network:
    driver: bridge